(function(){if(beCPG.module.EntityDataGridRenderers){var a=Alfresco.util.encodeHTML;YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["pjt:projectEntity","pjt:parentProjectRef"],renderer:function(n,c,g,l,d,k,h,e){if(c.value!=null){var b=beCPG.util.entityURL(c.siteId,c.value),f="";var m=100;if(e.tooltip){m=e.tooltip}if(c.version&&c.version!==""){f='<span class="document-version">'+c.version+"</span>"}return'<span class="'+c.metadata+'"><a href="'+b+'">'+beCPG.util.createTextTooltip(c.displayValue,m)+"</a></span>"+f}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"cm:person_pjt:projectManager",renderer:function(e,g,c,d){if(d.options.columnFormId!="datagrid-simple"){var b="";var f=e.getData("itemData")["assoc_pjt_projectManager"];if(f&&f[0]){b+='<div class="project-manager avatar" title="'+f[0].displayValue+'">';b+=Alfresco.Share.userAvatar(f[0].metadata,32)+"&nbsp;"+Alfresco.util.userProfileLink(g.metadata,g.displayValue);b+="</div>"}return b}else{return'<span class="person">'+Alfresco.util.userProfileLink(g.metadata,g.displayValue)+"</span>"}}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"cm:name",renderer:function(f,h,b,e,c,d,g,k){return e.getProjectTitleV2(f.getData(),e.options.columnFormId!="datagrid-simple",k)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"pjt:taskList",renderer:function(r,f,l,p,o,d,n,i){var b=r.getData();if(f.itemData){if(o==0){var q=100;if(i.tooltip){q=i.tooltip}var e=r.getData("itemData")["dt_pjt_taskList"];var g="";var m="<ul>";var h=0;for(j in e){var c=e[j];h++;var k="";if(c.itemData["prop_bcpg_parentLevel"].value!=null){k='style="padding-left:10px;"'}if(h>4){g+="<li "+k+">"+p.getTaskTitle(c,b.nodeRef,true)+"</li>"}else{m+="<li "+k+">"+p.getTaskTitle(c,b.nodeRef,true,q)+"</li>"}}m+="</ul>";if(g.length>0){m+='<div class="more-task"><div class="onActionShowMore"><a href="#" class="'+p.id+'-show-more show-more" title="'+p.msg("tasks.more")+'"><span>'+p.msg("tasks.more")+'</span></a></div> <div class="more-actions hidden"><ul>'+g+"</ul></div></div>"}return m}return null}}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:activityList",renderer:function(k,e,g,i,h,c){if(e.itemData){var d=e.itemData["prop_bcpg_alUserId"];var b=e.itemData["prop_bcpg_alData"]?e.itemData["prop_bcpg_alData"]:null;var f="";if(b!=null&&b.title){f+='<div class="project-activity-details">';f+='   <div class="icon" title="'+d.displayValue+'">'+Alfresco.Share.userAvatar(d.value,32)+"</div>";f+='   <div class="details">';if(b.content){f+='      <div class="activity-content">'+(b.content)+"</div>"}f+="   </div>";f+='   <div class="clear"></div>';f+="</div>"}return f}}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"pjt:deliverableList",renderer:function(o,h,k,n,l,d){var c=o.getData();var m=o.getData("itemData")["dt_pjt_deliverableList"];var i="";var g="<ul>";if(l==0){for(j in m){var e=m[j],b=e.itemData["prop_pjt_dlState"].value,f=e.itemData["prop_pjt_dlScriptExecOrder"].value;if(b!="Planned"&&(f==null||f.length==0||f=="None")){if(b=="Closed"){i+="<li>"+n.getDeliverableTitle(e,c.nodeRef)+"</li>"}else{g+="<li>"+n.getDeliverableTitle(e,c.nodeRef)+"</li>"}}}g+="</ul>";if(i.length>0){g+='<div class="more-deliverable"><div class="onActionShowMore"><a href="#" class="'+n.id+'-show-more show-more" title="'+n.msg("deliverables.more")+'"><span>'+n.msg("deliverables.more")+'</span></a></div> <div class="more-actions hidden"><ul>'+i+"</ul></div></div>"}return g}return null}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"pjt:projectPriority",renderer:function(d,e,b,c){return c.getPriorityImg(d.getData(),false)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"pjt:projectStartDate",renderer:function(e,f,c,d){var g=d.extractDates(e.getData()),b=g.due;var h='<span class="start">'+(g.start?Alfresco.util.formatDate(g.start,"shortDate"):d.msg("label.none"))+"</span>";if(g.end!=null){b=g.end}h+='&nbsp;-&nbsp;<span class="'+(g.end!=null?"end":"due")+'">'+(b!=null?Alfresco.util.formatDate(b,"shortDate"):d.msg("label.none"))+"</span>";return h}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"pjt:projectOverdue",renderer:function(d,f,b,c){var e=f.displayValue!=null?a(f.displayValue)+"&nbsp;"+c.msg("overdue.day"):"";return'<span class="center '+c.getOverdueClass(d.getData(),32)+'" title="'+e+'">'+e+"</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["pjt:projectScore"],renderer:function(d,e,b,c){return(e.value!=null)?a(e.displayValue)+"&nbsp; %":""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["pjt:completionPercent"],renderer:function(d,e,b,c){return"<progress max='100' value='"+e.value+"' >'"+a(e.displayValue)+"&nbsp; %</progress>"}})}})();