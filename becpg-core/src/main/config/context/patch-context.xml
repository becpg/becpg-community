<?xml version='1.0' encoding='UTF-8'?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"   >

	<!-- Abstract bean -->
	<bean id="beCPGBasePatch" abstract="true" class="fr.becpg.repo.admin.patch.AbstractBeCPGPatch" parent="basePatch">
		<property name="repository" ref="repositoryHelper"/>
		<property name="contentHelper" ref="contentHelper"/>	
		<property name="entitySystemService" ref="entitySystemService"/>
		<property name="repoService" ref="repoService"/>	
	</bean>
	
	<bean id="patch.bcpg.emailTemplatesPatch" class="fr.becpg.repo.admin.patch.EmailTemplatesPatch" parent="beCPGBasePatch" >
        <property name="id"><value>patch.bcpg.emailTemplatesPatch</value></property>
        <property name="description"><value>patch.bcpg.emailTemplatesPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10001</value></property>        
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
    </bean>
 
    <bean id="patch.bcpg.redeployWfProcess" class="fr.becpg.repo.admin.patch.GenericWorkflowPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.redeployWfProcess</value></property>
        <property name="description"><value>patch.bcpg.redeployWfProcess.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
         <property name="fixesToSchema"><value>6022</value></property>
        <property name="targetSchema"><value>10000</value></property>
       <property name="dependsOn" >
            <list>
                <ref bean="patch.bcpg.emailTemplatesPatch" />
            </list>
        </property> 
        <property name="workflowDefinitions">
            <list>
	            <props>
						<prop key="engineId">jbpm</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/adhoc_processdefinition.xml</prop>
						<prop key="mimetype">text/xml</prop>
					</props>
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/quality/non-conformity-adhoc.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>
					<!-- Not email aware -->
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/quality/non-conformity-process.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>	
            </list>
        </property>
    </bean> 
    
	<bean id="patch.bcpg.removeCostDetailsListPatch" class="fr.becpg.repo.admin.patch.RemoveCostDetailsListPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.removeCostDetailsListPatch</value></property>
        <property name="description"><value>patch.bcpg.removeCostDetailsListPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10002</value></property>
        <property name="beCPGSearchService" ref="beCPGSearchService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>
	
	<bean id="patch.bcpg.ecmPatch" class="fr.becpg.repo.admin.patch.ECMPatch" parent="beCPGBasePatch" >
        <property name="id"><value>patch.bcpg.ecmPatch</value></property>
        <property name="description"><value>patch.bcpg.ecmPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10003</value></property>
       <!--  <property name="initRepoVisitor" ref="initRepoVisitor"/> -->
        <property name="beCPGSearchService" ref="beCPGSearchService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
    </bean> 
	
   <bean id="patch.bcpg.qualitySortableListPatch" class="fr.becpg.repo.admin.patch.QualitySortableListPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.qualitySortableListPatch</value></property>
        <property name="description"><value>patch.bcpg.qualitySortableListPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10004</value></property>
        <property name="beCPGSearchService" ref="beCPGSearchService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>
	
	<bean id="patch.bcpg.qualityEntityListsAspectPatch" class="fr.becpg.repo.admin.patch.QualityEntityListsAspectPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.qualityEntityListsAspectPatch</value></property>
        <property name="description"><value>patch.bcpg.qualityEntityListsAspectPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10005</value></property>
        <property name="beCPGSearchService" ref="beCPGSearchService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>
	
	<bean id="patch.bcpg.resourcesPatch1" class="fr.becpg.repo.admin.patch.ResourcesPatch1" parent="beCPGBasePatch" >
        <property name="id"><value>patch.bcpg.resourcesPatch1</value></property>
        <property name="description"><value>patch.bcpg.resourcesPatch1.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10006</value></property>
        <property name="reportTplService" ref="reportTplService"/>
        <property name="dictionaryService" ref="dictionaryService"/>
        <property name="repoService" ref="repoService" />  
        <property name="policyBehaviourFilter" ref="policyBehaviourFilter" />    
        <property name="versionService" ref="versionService" />
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>	
	
	 <bean id="patch.bcpg.redeployWfProjectProcess" class="fr.becpg.repo.admin.patch.GenericWorkflowPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.redeployWfProjectProcess</value></property>
        <property name="description"><value>patch.bcpg.redeployWfProjectProcess.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10007</value></property>
        <property name="workflowDefinitions">
            <list>
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/project/project-adhoc.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>				
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/project/project-newProduct.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>
            </list>
        </property>
    </bean> 
    
	 <bean id="patch.bcpg.packagingLevelPatch" class="fr.becpg.repo.admin.patch.PackagingLevelPatch" parent="beCPGBasePatch" >
        <property name="id"><value>patch.bcpg.patch.bcpg.packagingLevelPatch</value></property>
        <property name="description"><value>patch.bcpg.patch.bcpg.packagingLevelPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10008</value></property>
        <property name="beCPGSearchService" ref="beCPGSearchService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>
	
		<bean id="patch.bcpg.redeployWfProductValidation" class="fr.becpg.repo.admin.patch.GenericWorkflowPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.redeployWfProductValidation</value></property>
        <property name="description"><value>patch.bcpg.redeployWfProductValidation.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10009</value></property>
        <property name="workflowDefinitions">
            <list>
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/product-validation.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>
            </list>
        </property>
    </bean> 
	
	 <bean id="patch.bcpg.removeProductValidationWorkflowPatch" class="fr.becpg.repo.admin.patch.RemoveProductValidationWorkflowPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.removeProductValidationWorkflowPatch</value></property>
        <property name="description"><value>patch.bcpg.removeProductValidationWorkflowPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10010</value></property>
        <property name="workflowService" ref="WorkflowService"/>
        <property name="authorityService" ref="authorityService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean> 
	
	<bean id="patch.bcpg.nutFactsMethodsPatch" class="fr.becpg.repo.admin.patch.NutFactsMethodsPatch" parent="beCPGBasePatch" >
        <property name="id"><value>patch.bcpg.nutFactsMethodsPatch</value></property>
        <property name="description"><value>patch.bcpg.nutFactsMethodsPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10011</value></property>
        <property name="entitySystemService" ref="entitySystemService" />
        <property name="importService" ref="importService" />
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>	
	
	<bean id="patch.bcpg.renameBIRTTemplateExtensionPatch" class="fr.becpg.repo.admin.patch.RenameBIRTTemplateExtensionPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.renameBIRTTemplateExtensionPatch</value></property>
        <property name="description"><value>patch.bcpg.renameBIRTTemplateExtensionPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10012</value></property>
        <property name="beCPGSearchService" ref="beCPGSearchService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>
	
	<bean id="patch.bcpg.redeployClaimWf" class="fr.becpg.repo.admin.patch.GenericWorkflowPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.redeployClaimWf</value></property>
        <property name="description"><value>patch.bcpg.redeployClaimWf.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10013</value></property>
        <property name="workflowDefinitions">
            <list>
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/quality/claim-process.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>	
            </list>
        </property>
    </bean> 
	
	<bean id="patch.bcpg.qualityListPatch" class="fr.becpg.repo.admin.patch.QualityListPatch" parent="beCPGBasePatch" >
        <property name="id"><value>patch.bcpg.qualityListPatch</value></property>
        <property name="description"><value>patch.bcpg.qualityListPatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10014</value></property>
        <property name="initRepoVisitor" ref="initRepoVisitor"/>
        <property name="fileFolderService" ref="fileFolderService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>

	<bean id="patch.bcpg.labelingRulePatch" class="fr.becpg.repo.admin.patch.LabelingRulePatch" parent="beCPGBasePatch" >
        <property name="id"><value>patch.bcpg.labelingRulePatch</value></property>
        <property name="description"><value>patch.bcpg.labelingRulePatch.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10015</value></property>
        <property name="beCPGSearchService" ref="beCPGSearchService"/>
        <property name="requiresTransaction"><value>true</value></property>
        <property name="applyToTenants"><value>true</value></property>
	</bean>
	
	<bean id="patch.bcpg.redeployWfProjectProcess2" class="fr.becpg.repo.admin.patch.GenericWorkflowPatch" parent="basePatch" >
        <property name="id"><value>patch.bcpg.redeployWfProjectProcess2</value></property>
        <property name="description"><value>patch.bcpg.redeployWfProjectProcess.description</value></property>
        <property name="fixesFromSchema"><value>0</value></property>
        <property name="fixesToSchema"><value>${version.schema}</value></property>
        <property name="targetSchema"><value>10016</value></property>
        <property name="workflowDefinitions">
            <list>
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/project/project-adhoc.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>				
					<props>
						<prop key="engineId">activiti</prop>
						<prop key="location">alfresco/module/${pom.artifactId}/workflow/project/project-newProduct.bpmn</prop>
						<prop key="mimetype">text/xml</prop>
					</props>
            </list>
        </property>
    </bean>
    
</beans>
