<?xml version="1.0" encoding="UTF-8"?>
<model xmlns="http://www.alfresco.org/model/dictionary/1.0" name="ncwf:nonConformityModel">
    <author>beCPG</author>
    <version>1.0</version>
    <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d"/>
        <import uri="http://www.alfresco.org/model/bpm/1.0" prefix="bpm"/>
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />
        <import uri="http://www.bcpg.fr/model/becpg/1.0" prefix="bcpg" />
    </imports>
    <namespaces>
        <namespace uri="http://www.bcpg.fr/model/nc-workflow/1.0" prefix="ncwf"/>
    </namespaces>
    <data-types/>
    <constraints/>    	
    <types>
        <type name="ncwf:startTask">
            <parent>bpm:startTask</parent>
            <properties>
            	<property name="ncwf:batchId">
						<type>d:text</type>
					</property>
            </properties>
            <associations>            	
            	<association name="ncwf:ncFolder">
						<source>
							<mandatory>false</mandatory>
							<many>true</many>
						</source>
						<target>
							<class>cm:folder</class>
							<mandatory>true</mandatory>
							<many>false</many>
						</target>
					</association>
					<association name="ncwf:product">
						<source>
							<mandatory>false</mandatory>
							<many>true</many>
						</source>
						<target>
							<class>bcpg:product</class>
							<mandatory>false</mandatory>
							<many>false</many>
						</target>
					</association>
					<association name="ncwf:supplier">
						<source>
							<mandatory>false</mandatory>
							<many>true</many>
						</source>
						<target>
							<class>bcpg:supplier</class>
							<mandatory>false</mandatory>
							<many>false</many>
						</target>
					</association>
					<association name="ncwf:client">
						<source>
							<mandatory>false</mandatory>
							<many>true</many>
						</source>
						<target>
							<class>bcpg:client</class>
							<mandatory>false</mandatory>
							<many>false</many>
						</target>
					</association>
            </associations>
            <overrides>
                <property name="bpm:packageActionGroup">
                    <mandatory/>
                    <default>add_package_item_actions</default>
                    <constraints/>
                </property>
                <property name="bpm:packageItemActionGroup">
                    <mandatory/>
                    <default>edit_package_item_actions</default>
                    <constraints/>
                </property>
            </overrides>
        </type>
        <type name="ncwf:analysisTask">
            <parent>bpm:workflowTask</parent>
            <properties>
            	<property name="ncwf:needPrevAction">
						<type>d:boolean</type>
					</property>					
            </properties>
            <associations>
            	<association name="ncwf:corrActionActor">
						<source>
							<mandatory>false</mandatory>
							<many>true</many>
						</source>
						<target>
							<class>cm:person</class>
							<mandatory>true</mandatory>
							<many>false</many>
						</target>
					</association>	
					<association name="ncwf:checkActor">
						<source>
							<mandatory>false</mandatory>
							<many>true</many>
						</source>
						<target>
							<class>cm:person</class>
							<mandatory>true</mandatory>
							<many>false</many>
						</target>
					</association>	
            </associations>  
            <mandatory-aspects>
            	<aspect>ncwf:correctiveAction</aspect>
            </mandatory-aspects>
        </type>
        <type name="ncwf:corrActionTask">
            <parent>bpm:workflowTask</parent>
            <properties/>
            <associations/>            
            <mandatory-aspects>
            	<aspect>ncwf:correctiveAction</aspect>
            </mandatory-aspects>
        </type>
        <type name="ncwf:checkTask">
            <parent>bpm:workflowTask</parent>
            <properties>
            	<property name="ncwf:acEfficiency">
						<type>d:text</type>
<!-- 						<constraints> -->
<!-- 							<constraint name="ncwf:acEfficiencyList" type="LIST"> -->
<!-- 								<parameter name="allowedValues"> -->
<!-- 									<list> -->
<!-- 										<value>Satisfaisante</value> -->
<!-- 										<value>Partielle</value> -->
<!-- 										<value>Non satisfaisante</value> -->
<!-- 									</list> -->
<!-- 								</parameter> -->
<!-- 							</constraint> -->
<!-- 						</constraints> -->
					</property>
            </properties>
            <associations/>           
            <mandatory-aspects/>
        </type>
        <type name="ncwf:notificationTask">
            <parent>bpm:workflowTask</parent>
            <properties/>
            <associations/>            
            <mandatory-aspects/>
        </type>
        <type name="ncwf:prevActionTask">
            <parent>bpm:workflowTask</parent>
            <properties/>
            <associations/>            
            <mandatory-aspects/>
        </type>
    </types>
    <aspects>
    	<aspect name="ncwf:correctiveAction">
			<properties>
				<property name="ncwf:acType">
						<type>d:text</type>
<!-- 						<constraints> -->
<!-- 							<constraint name="ncwf:acTypes" type="LIST"> -->
<!-- 								<parameter name="allowedValues"> -->
<!-- 									<list> -->
<!-- 										<value>Correction</value> -->
<!-- 										<value>DÃ©classement</value> -->
<!-- 										<value>Destruction</value> -->
<!-- 										<value>Blocage produit</value> -->
<!-- 									</list> -->
<!-- 								</parameter> -->
<!-- 							</constraint>		 -->
<!-- 						</constraints> -->
					</property>					
					<property name="ncwf:acDescription">
						<type>d:text</type>
					</property>
			</properties>
		</aspect>
    </aspects>
</model>