const PROPS=[{prop:"cm:title"},{prop:"cm:description"},{prop:"bcpg:legalName"},{prop:"bcpg:packagingDescription"},{prop:"bcpg:productComments"},{prop:"bcpg:useByDate"},{prop:"bcpg:bestBeforeDate"},{prop:"bcpg:preparationTips"},{prop:"bcpg:productQty"},{prop:"bcpg:productUnit"},{prop:"bcpg:netWeight"},{prop:"bcpg:numberOfServings"},{prop:"bcpg:unitPrice"},{prop:"bcpg:priceCurrency"},{prop:"bcpg:projectedQty"}];const ASSOCS=[{assoc:"bcpg:clients"},{assoc:"bcpg:subsidiary"},{assoc:"bcpg:plants"},{assoc:"bcpg:trademark"},{assoc:"bcpg:storageConditions"},{assoc:"bcpg:precautionOfUse"},{assoc:"bcpg:productSpecifications"}];function createCallForTender(){var m=document.parent.parent.parent;var c=m.parent.parent;var n="bcpg:suppliers";if(m!=null&&c!=null){var d=m.assocs[n];var j=search.findNode("workspace://SpacesStore/9e528d08-fe3a-4ecf-af8c-7b2077acd980");var l=m.assocs["pjt:projectEntity"];if(d!=null&&j!=null&&l==null){for(var f=0;f<d.length;f++){logger.log("supplier "+d[f].name);var e=c.childByNamePath(d[f].name+"/Produits");if(e!=null){var b=j.copy(e,true);b.removeAspect("bcpg:entityTplAspect");b.properties["cm:name"]=m.name+" "+d[f].name;for(row in PROPS){b.properties[PROPS[row].prop]=m.properties[PROPS[row].prop]}b.save();b.createAssociation(d[f],n);b.createAssociation(j,"bcpg:entityTplRef");for(row in ASSOCS){var h=m.assocs[ASSOCS[row].assoc];if(h!=null){for(var g=0;g<h.length;g++){b.createAssociation(h[g],ASSOCS[row].assoc)}}}var a=m.childByNamePath("1) Brief/Brief.doc");if(a!=null){a.copy(b.childByNamePath("Brief"))}m.createAssociation(b,"pjt:projectEntity")}}}}}createCallForTender();