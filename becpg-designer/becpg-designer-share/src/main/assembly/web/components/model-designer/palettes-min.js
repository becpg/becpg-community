(function(){var b=YAHOO.util.Dom;beCPG.component.DesignerPalettes=function(e){this.id=e;beCPG.component.DesignerPalettes.superclass.constructor.call(this,"beCPG.component.DesignerPalettes",e,["button","container"]);return this};YAHOO.extend(beCPG.component.DesignerPalettes,Alfresco.component.Base,{onReady:function d(){headers=YUISelector.query("h2",this.id);if(YAHOO.lang.isArray(headers)){for(var e in headers){Alfresco.util.createTwister(headers[e],this.filterName)}}this.renderDesignerControls()},renderDesignerControls:function a(){var h=this;var i={success:function e(k){var j=YAHOO.lang.JSON.parse(k.responseText);if(j){this._buildControls(j)}},failure:function g(j){if(j.status==401){window.location.reload()}alert("Unexpected error")},scope:h};var f=Alfresco.constants.PROXY_URI+"becpg/designer/controls";YAHOO.util.Connect.asyncRequest("GET",f,i)},_buildControls:function c(g){var e=b.get(this.id+"-form-controls"),h=b.get(this.id+"-form-sets"),k,j;for(var f in g.controls){j=g.controls[f].id;k=document.createElement("li");k.setAttribute("id","formControls_"+j);k.setAttribute("class","form-control-"+j);k.innerHTML=j;e.appendChild(k);new beCPG.DnD("formControls_"+j,this,null,"control")}for(var f in g.sets){j=g.sets[f].id;k=document.createElement("li");k.setAttribute("id","formSets_"+j);k.setAttribute("class","form-set-"+j);k.innerHTML=j;h.appendChild(k);new beCPG.DnD("formSets_"+j,this,null,"set")}}})})();