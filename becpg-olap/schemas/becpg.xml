<Schema name="beCPG OLAP Schema">
  <Cube name="Analyses des co&#251;ts" cache="false" enabled="true">
    <Table name="Cost">
    </Table>
    <Dimension type="StandardDimension" foreignKey="entityId" highCardinality="false" name="Produit">
      <Hierarchy hasAll="true" primaryKey="id">
        <Table name="Product" alias="">
        </Table>
        <Level name="Famille" table="Product" column="productHierarchy1" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Sous famille" table="Product" column="productHierarchy2" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Nom produit" table="Product" column="name" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Etat produit" table="Product" column="productState" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension highCardinality="false" name="Type de co&#251;t">
      <Hierarchy hasAll="true">
        <Level name="Type" column="name" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Measure name="Co&#251;t" column="costListValue" datatype="Numeric" formatString="#,###.00&#8364;" aggregator="sum" visible="true">
    </Measure>
    <Measure name="Co&#251;t Moyen" column="costListValue" datatype="Numeric" formatString="#,###.00&#8364;" aggregator="avg">
    </Measure>
  </Cube>
  <Cube name="Produits" cache="false" enabled="true">
    <Table name="Product">
    </Table>
    <Dimension highCardinality="false" name="Designation">
      <Hierarchy hasAll="true">
        <Level name="Famille" column="productHierarchy1" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Sous famille" column="productHierarchy2" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Nom produit" column="name" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Code produit" column="code" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension highCardinality="false" name="Etat">
      <Hierarchy hasAll="true">
        <Level name="Etat" column="productState" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" foreignKey="id" highCardinality="false" name="Client">
      <Hierarchy hasAll="true" primaryKey="source_node_id">
        <View alias="ClientProduct">
          <SQL dialect="mysql">
            <![CDATA[select node.id , code.long_value , name.string_value , product_assoc.source_node_id
			 from alf_node node
			 left outer join alf_node_properties code on (node.id = code.node_id and code.qname_id in (select id from alf_qname where  local_name = 'code'))
			 left outer join alf_node_properties name on (node.id = name.node_id and name.qname_id in (select id from alf_qname where  local_name = 'name'))
			 inner join  alf_node_assoc product_assoc on (node.id = product_assoc.target_node_id)
			 where 
			 (
			 node.type_qname_id in (select id from alf_qname where  local_name = 'client')
			 )
			 and node.store_id in (select id from alf_store where  identifier = 'SpacesStore' and protocol='workspace')]]>
          </SQL>
        </View>
        <Level name="Nom client" column="string_value" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" foreignKey="id" highCardinality="false" name="Nutriment">
      <Hierarchy hasAll="true" primaryKey="entityId">
        <Table name="NutList" alias="">
        </Table>
        <Level name="Nutriment" table="NutList" column="name" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Type de nutriment" table="NutList" column="nutType" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
        <Level name="Groupe de nutriment" table="NutList" column="nutGroup" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" foreignKey="id" highCardinality="false" name="Allerg&#232;ne">
      <Hierarchy hasAll="true" primaryKey="entityId">
        <Table name="AllergenList" alias="">
        </Table>
        <Level name="Allerg&#232;ne" table="AllergenList" column="name" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" foreignKey="id" highCardinality="false" name="Ingr&#233;dient">
      <Hierarchy hasAll="true" primaryKey="entityId">
        <Table name="IngList">
        </Table>
        <Level name="Ingr&#233;dient" table="IngList" column="name" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" foreignKey="id" highCardinality="false" name="Composition">
      <Hierarchy hasAll="true" primaryKey="entityId">
        <Table name="CompoList" alias="">
        </Table>
        <Level name="Mati&#232;re premi&#232;re" table="CompoList" column="name" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Dimension type="StandardDimension" foreignKey="id" highCardinality="false" name="Emballage">
      <Hierarchy hasAll="true" primaryKey="entityId">
        <Table name="PackagingList" alias="">
        </Table>
        <Level name="Emballage" table="PackagingList" column="name" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension>
    <Measure name="Nombre de produits" column="id" datatype="Integer" aggregator="count" visible="true">
    </Measure>
  </Cube>
</Schema>
