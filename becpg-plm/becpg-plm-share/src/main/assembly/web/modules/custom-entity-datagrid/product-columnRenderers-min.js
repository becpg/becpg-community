if(beCPG.module.EntityDataGridRenderers){YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:product","bcpg:supplier","bcpg:client","bcpg:entity","bcpg:resourceProduct","cm:content_bcpg:costDetailsListSource","bcpg:product_bcpg:packagingListProduct","bcpg:product_bcpg:compoListProduct","ecm:wulSourceItems","ecm:rlSourceItems","bcpg:psclSourceItem","ecm:rlTargetItem","ecm:culSourceItem","ecm:culTargetItem","ecm:cclSourceItem","cm:cmobject_bcpg:lrComponents"],renderer:function(l,d,i,k,g,b,j,e){var a=beCPG.util.entityURL(d.siteId,d.value),f="";var c=null;var h=0;if(l.getData("itemData")["prop_bcpg_depthLevel"]&&l.getData("itemData")["prop_bcpg_depthLevel"].value){h=(l.getData("itemData")["prop_bcpg_depthLevel"].value-1)*25}if(i=="mpm:plProduct"||i=="bcpg:compoListProduct"||i=="bcpg:packagingListProduct"||i=="mpm:plResource"){if(d.metadata.indexOf("finishedProduct")!=-1||d.metadata.indexOf("semiFinishedProduct")!=-1){a=beCPG.util.entityURL(d.siteId,d.value,null,null,"compoList")}else{if(d.metadata.indexOf("packagingKit")!=-1){a=beCPG.util.entityURL(d.siteId,d.value,null,null,"packagingList")}else{if(d.metadata.indexOf("localSemiFinishedProduct")!=-1){a=null}}}if(d.version&&d.version!==""){f='<span class="document-version">'+d.version+"</span>"}if(a!=null){a+="&bcPath=true&bcList="+k.datalistMeta.name}if(false===l.getData("itemData")["isLeaf"]){c='<div id="group_'+(l.getData("itemData")["open"]?"expanded":"collapsed")+"_"+l.getData("nodeRef")+'" style="margin-left:'+h+'px;" class="onCollapsedAndExpanded" ><a href="#" class="'+k.id+'-action-link"><span class="gicon ggroup-'+(l.getData("itemData")["open"]?"expanded":"collapsed")+'"></span></a></div>'}else{if(true===l.getData("itemData")["isLeaf"]){h+=25}}}if(i=="mpm:rplResourceRef"){if(e.hidden){k.widgets.dataTable.showColumn(e);Dom.removeClass(j.parentNode,"yui-dt-hidden")}}return(c!=null?c:"")+'<span class="'+d.metadata+'" '+(c==null&&h!=0?'style="margin-left:'+h+'px;"':"")+">"+(a!=null?'<a href="'+a+'">':"")+Alfresco.util.encodeHTML(d.displayValue)+(a!=null?"</a>":"")+"</span>"+f}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["boolean_bcpg:allergenListVoluntary","boolean_bcpg:allergenListInVoluntary","boolean_bcpg:packagingListIsMaster","boolean_ecm:culTreated","boolean_ecm:isWUsedImpacted"],renderer:function(c,d,a,b){if(d.value){return'<span class="red">'+Alfresco.util.encodeHTML(d.displayValue)+"</span>"}return Alfresco.util.encodeHTML(d.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:lclClaimValue"],renderer:function(c,d,a,b){if("true"===d.value){return'<span class="red">'+Alfresco.util.encodeHTML(d.displayValue)+"</span>"}else{if("suitable"===d.value){return'<span class="blue">'+Alfresco.util.encodeHTML(d.displayValue)+"</span>"}}return Alfresco.util.encodeHTML(d.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:allergenListDecisionTree",renderer:function(oRecord,data,label,scope){var ret="";if(data.value){var values=eval(data.value);for(var i=0;i<values.length;i++){if(ret.length>0){ret+=", "}var msgKey=values[i].cid=="-"?"form.control.decision-tree.empty":"form.control.decision-tree.allergenList."+values[i].qid+"."+values[i].cid;ret+=values[i].qid.toUpperCase()+": "+scope.msg(msgKey)}}return ret}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["cm:cmobject_bcpg:allergenListVolSources","cm:cmobject_bcpg:allergenListInVolSources"],renderer:function(c,d,a,b){if(d.metadata=="ing"){return'<span class="'+d.metadata+'" >'+Alfresco.util.encodeHTML(d.displayValue)+"</span>"}return'<span class="'+d.metadata+'" ><a href="'+beCPG.util.entityURL(d.siteId,d.value)+'">'+Alfresco.util.encodeHTML(d.displayValue)+"</a></span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:rclReqType","bcpg:filReqType","ecm:culReqType"],renderer:function(c,d,a,b){if(d.value!=null&&d.value.length>0){return'<span class="reqType'+d.value+'">'+Alfresco.util.encodeHTML(b.msg("data.reqtype."+d.value.toLowerCase()))+"</span>"}return Alfresco.util.encodeHTML(d.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["ecm:rlRevisionType","ecm:culRevision"],renderer:function(d,e,b,c){if(e.value!=null){if(d.getData("itemData")["prop_ecm_culReqError"]){var a=d.getData("itemData")["prop_ecm_culReqError"].value;if(a!=null){return'<span class="lcl-formulated-error" title="'+Alfresco.util.encodeHTML(a)+'">'+c.msg("data.revisiontype."+e.value.toLowerCase())+"</span>"}}return c.msg("data.revisiontype."+e.value.toLowerCase())}return Alfresco.util.encodeHTML(e.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["qa:slControlPoint"],renderer:function(d,e,b,c){var a=beCPG.util.entityURL(e.siteId,e.value);return'<span class="controlPoint"><a href="'+a+'">'+Alfresco.util.encodeHTML(e.displayValue)+"</a></span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["qa:clCharacts"],renderer:function(d,e,b,c){var a=c._buildCellUrl(e);return'<span class="'+e.metadata+'">'+Alfresco.util.encodeHTML(e.displayValue)+"</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["qa:clState","qa:slSampleState"],renderer:function(c,d,a,b){if(d.value!=null){if(d.value=="Compliant"){return'<span class="green">'+Alfresco.util.encodeHTML(d.displayValue)+"</span>"}else{if(d.value=="NonCompliant"){return'<span class="red">'+Alfresco.util.encodeHTML(d.displayValue)+"</span>"}}}return Alfresco.util.encodeHTML(d.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:allergen","bcpg:ing","bcpg:geoOrigin","bcpg:bioOrigin","bcpg:geo","bcpg:microbio","bcpg:organo"],renderer:function(d,e,b,c){var a=null;if(c.datalistMeta&&c.datalistMeta&&c.datalistMeta.name.indexOf("WUsed")>-1){a=beCPG.util.entityURL(e.siteId,e.value)}if(d.getData("itemData")["prop_bcpg_depthLevel"]!=null){var f=(d.getData("itemData")["prop_bcpg_depthLevel"].value-1)*25;return'<span class="'+e.metadata+'" style="margin-left:'+f+'px;">'+(a!=null?'<a href="'+a+'">':"")+Alfresco.util.encodeHTML(e.displayValue)+(a!=null?"</a>":"")+"</span>"}return'<span class="'+e.metadata+'" >'+(a!=null?'<a href="'+a+'">':"")+Alfresco.util.encodeHTML(e.displayValue)+(a!=null?"</a>":"")+"</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:physicoChem",renderer:function(i,c,g,h){var a=null;if(h.datalistMeta&&h.datalistMeta&&h.datalistMeta.name.indexOf("WUsed")>-1){a=beCPG.util.entityURL(c.siteId,c.value)}var f=Alfresco.util.encodeHTML(c.metadata);var j=c.metadata;var b=i.getData("itemData")["prop_bcpg_physicoChemIsFormulated"].value;var d=i.getData("itemData")["prop_bcpg_physicoChemFormulaErrorLog"].value;if(d!=null){j="physicoChem-formulated-error";f=Alfresco.util.encodeHTML(d)}else{if(b){j="physicoChem-formulated"}}if(i.getData("itemData")["prop_bcpg_depthLevel"]!=null){var e=(i.getData("itemData")["prop_bcpg_depthLevel"].value-1)*25;return'<span class="'+j+'" style="margin-left:'+e+'px;" title="'+f+'">'+(a!=null?'<a href="'+a+'">':"")+Alfresco.util.encodeHTML(c.displayValue)+(a!=null?"</a>":"")+"</span>"}return'<span class="'+j+'" title="'+f+'">'+(a!=null?'<a href="'+a+'">':"")+Alfresco.util.encodeHTML(c.displayValue)+(a!=null?"</a>":"")+"</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:nut",renderer:function(e,f,c,d){var b=null;if(d.datalistMeta&&d.datalistMeta&&d.datalistMeta.name.indexOf("WUsed")>-1){b=beCPG.util.entityURL(f.siteId,f.value)}var h=Alfresco.util.encodeHTML(f.metadata);var a=f.metadata;if(e.getData("itemData")["prop_bcpg_nutListIsFormulated"]){if(e.getData("itemData")["prop_bcpg_nutListFormulaErrorLog"]&&e.getData("itemData")["prop_bcpg_nutListFormulaErrorLog"].value!=null){a="nut-formulated-error";h=Alfresco.util.encodeHTML(e.getData("itemData")["prop_bcpg_nutListFormulaErrorLog"].value)}else{if(e.getData("itemData")["prop_bcpg_nutListIsFormulated"].value){a="nut-formulated"}}}if(e.getData("itemData")["prop_bcpg_depthLevel"]!=null){var g=(e.getData("itemData")["prop_bcpg_depthLevel"].value-1)*25;return'<span class="'+a+'" style="margin-left:'+g+'px;" title="'+h+'">'+(b!=null?'<a href="'+b+'">':"")+Alfresco.util.encodeHTML(f.displayValue)+(b!=null?"</a>":"")+"</span>"}return'<span class="'+a+'" title="'+h+'">'+(b!=null?'<a href="'+b+'">':"")+Alfresco.util.encodeHTML(f.displayValue)+(b!=null?"</a>":"")+"</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:nutListValue",renderer:function(m,c,g,l,d,k,j,e){var f="";function a(i){if(i==0){return"0"}else{if(Math.abs(i)<0.000001){return beCPG.util.sigFigs(i*1000000,3).toLocaleString()+"×10<sup>-6</sup>"}else{if(Math.abs(i)<0.01){return beCPG.util.sigFigs(i*1000,3).toLocaleString()+"×10<sup>-3</sup>"}else{if(Math.abs(i)>=1000000){return beCPG.util.sigFigs(i/1000000,3).toLocaleString()+"×10<sup>6</sup>"}}}}return beCPG.util.sigFigs(i,3).toLocaleString()}var h=m._oData.itemData.prop_bcpg_nutListUnit.value;if(c.value!=null){f+=a(c.value)+" "+h}var b=m.getData("itemData")["prop_bcpg_nutListFormulatedValue"];if(b!=null&&b.value!=null){if(f.length>0){f+="&nbsp;&nbsp;("+a(b.value)+")"}else{f+=a(b.value)+" "+h}}return f}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:nutListMini","bcpg:nutListMaxi","bcpg:nutListValuePerServing"],renderer:function(e,g,a,d,b,c,f,h){if(g.value!=null){return Alfresco.util.encodeHTML(beCPG.util.sigFigs(g.value,3).toLocaleString())}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:nutListGDAPerc",renderer:function(e,g,a,d,b,c,f,h){if(g.value!=null){return Alfresco.util.encodeHTML(beCPG.util.sigFigs(g.value,2).toLocaleString())}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:allergenListQtyPerc","bcpg:filQtyPercMaxi","bcpg:allergenRegulatoryThreshold","bcpg:ingListQtyPerc"],renderer:function(k,a,d,j,b,g,f,c){if(a.value!=null){var e,h;if(a.value==0){return"0"}else{if(Math.abs(a.value)<0.01){h=a.value*10000;e=" ppm"}else{if(Math.abs(a.value)<0.1){h=a.value*10;e=" ‰"}else{h=a.value;e=" %"}}}return Alfresco.util.encodeHTML(beCPG.util.sigFigs(h,3).toLocaleString()+e)}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:cost",renderer:function(i,c,g,h){var a=null;if(h.datalistMeta&&h.datalistMeta&&h.datalistMeta.name.indexOf("WUsed")>-1){a=beCPG.util.entityURL(c.siteId,c.value)}var f=Alfresco.util.encodeHTML(c.metadata);var j=c.metadata;if(i.getData("itemData")["prop_bcpg_costListIsFormulated"]!=null){var b=i.getData("itemData")["prop_bcpg_costListIsFormulated"].value;var d=i.getData("itemData")["prop_bcpg_costListFormulaErrorLog"].value;if(d!=null){j="cost-formulated-error";f=Alfresco.util.encodeHTML(d)}else{if(b){j="cost-formulated"}}}if(i.getData("itemData")["prop_bcpg_depthLevel"]!=null){var e=(i.getData("itemData")["prop_bcpg_depthLevel"].value-1)*25;return'<span class="'+j+'" style="margin-left:'+e+'px;" title="'+f+'">'+(a!=null?'<a href="'+a+'">':"")+Alfresco.util.encodeHTML(c.displayValue)+(a!=null?"</a>":"")+"</span>"}return'<span class="'+j+'" title="'+f+'">'+(a!=null?'<a href="'+a+'">':"")+Alfresco.util.encodeHTML(c.displayValue)+(a!=null?"</a>":"")+"</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:dynamicCharactValue",renderer:function(m,e,j,k){if(e.value!=null){var h=m.getData("itemData")["prop_bcpg_dynamicCharactErrorLog"].value;if(h==null){var c=m.getData("itemData")["prop_bcpg_dynamicCharactGroupColor"].value;if(!c){c="000000"}if(c.indexOf("#")<0){c="#"+c}if(e.value.indexOf&&e.value.indexOf('"comp":')>-1){var l=JSON.parse(e.value);if(l){var f="",d=0,a=null,g,b=null;for(d=0;d<l.comp.length;d++){if(l.comp[d].value){if(d==0){a=beCPG.util.sigFigs(parseFloat(l.comp[d].value),4);f+='<span style="color:'+c+';">'+Alfresco.util.encodeHTML(l.comp[d].displayValue)+"</span>"}else{b=beCPG.util.sigFigs(parseFloat(l.comp[d].value),4);if(b!=Number.NaN&&a!=Number.NaN){if(a==b){g="dynaCompEquals"}else{g=(a<b)?"dynaCompIncrease":"dynaCompDecrease"}}else{g="dynaCompNone"}f+='<span  class="'+g+'" >(<a title="'+l.comp[d].name+'" href="'+beCPG.util.entityURL(l.comp[d].siteId,l.comp[d].nodeRef,l.comp[d].itemType)+'">'+Alfresco.util.encodeHTML(l.comp[d].displayValue)+"</a>)</span>"}}}return f}}return'<span style="color:'+c+';">'+Alfresco.util.encodeHTML(e.displayValue)+"</span>"}return'<span class="dyna'+e.value.replace("#","")+'" title="'+Alfresco.util.encodeHTML(h)+'">'+Alfresco.util.encodeHTML(h.substring(0,7))+"</span>"}return Alfresco.util.encodeHTML(e.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:labelClaim",renderer:function(f,g,b,c){var e=f.getData("itemData")["prop_bcpg_lclIsFormulated"]!=null?f.getData("itemData")["prop_bcpg_lclIsFormulated"].value:false;if(e){var a=f.getData("itemData")["prop_bcpg_lclFormulaErrorLog"]!=null?f.getData("itemData")["prop_bcpg_lclFormulaErrorLog"].value:null;if(a==null){var d=f.getData("itemData")["dt_bcpg_lclLabelClaim"][0]["itemData"]["prop_cm_description"]!=null?f.getData("itemData")["dt_bcpg_lclLabelClaim"][0]["itemData"]["prop_cm_description"].displayValue:"";return'<span class="lcl-formulated"  title="'+Alfresco.util.encodeHTML(d)+'">'+Alfresco.util.encodeHTML(g.displayValue)+"</span>"}return'<span class="lcl-formulated-error" title="'+Alfresco.util.encodeHTML(a)+'">'+Alfresco.util.encodeHTML(g.displayValue)+"</span>"}return"<span>"+Alfresco.util.encodeHTML(g.displayValue)+"</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:rclReqMessage",renderer:function(k,b,e,j){if(j.datalistMeta&&j.datalistMeta&&j.datalistMeta.name.indexOf("WUsed")>-1){return b.displayValue}else{var a=k.getData("itemData")["prop_bcpg_rclReqType"].value;var h=k.getData("itemData")["assoc_bcpg_rclSources"];var d="";d+='<div class="rclReq-details">';if(a){d+='   <div class="icon" ><span class="reqType'+a+'" title="'+Alfresco.util.encodeHTML(j.msg("data.reqtype."+a.toLowerCase()))+'">&nbsp;</span></div>'}d+='      <div class="rclReq-title">'+Alfresco.util.encodeHTML(b.displayValue)+"</div>";d+='      <div class="rclReq-content"><ul>';if(h){for(var c in h){var f=h[c],g=beCPG.util.entityURL(f.siteId,f.value);if(f.metadata.indexOf("finishedProduct")!=-1||f.metadata.indexOf("semiFinishedProduct")!=-1){g=beCPG.util.entityURL(f.siteId,f.value,null,null,"compoList")}else{if(f.metadata.indexOf("packagingKit")!=-1){g=beCPG.util.entityURL(f.siteId,f.value,null,null,"packagingList")}}if(g){g+="&bcPath=true&bcList="+j.datalistMeta.name}d+='<li><span class="'+f.metadata+'" ><a href="'+g+'">'+Alfresco.util.encodeHTML(f.displayValue)+"</a></span></li>"}}+"</ul></div>";d+="   </div>";d+='   <div class="clear"></div>';d+="</div>";return d}}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:dynamicCharactTitle",renderer:function(j,b,e,h,c,g,f,d){var a=j.getData("itemData")["prop_bcpg_dynamicCharactColumn"].value;if(a!=null&&a.length>0){if(!Dom.get(h.id+"-colCheckbox").checked){Dom.addClass(f.parentNode.parentNode,"hidden")}return"<b>"+Alfresco.util.encodeHTML(b.displayValue)+"</b>"}return Alfresco.util.encodeHTML(b.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:lrLocales",renderer:function(j,b,e,h,c,g,f,d){if(b.value!=null){Dom.setStyle(f,"width","16px");Dom.setStyle(f.parentNode,"width","16px");if(d.hidden){h.widgets.dataTable.showColumn(d);Dom.removeClass(f.parentNode,"yui-dt-hidden")}var a=b.value[0];if(a.indexOf("_")>0){a=a.split("_")[1].toLowerCase()}return'<img  title="'+h.msg("locale.name."+b.value[0])+'" src="'+Alfresco.constants.URL_RESCONTEXT+"/components/images/flags/"+a+'.png" />'}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:dynamicCharactGroupColor",renderer:function(d,e,b,c){var a=d.getData("itemData")["prop_bcpg_dynamicCharactGroupColor"].value;if(!a){a="000000"}if(a.indexOf("#")<0){a="#"+a}return'<div style="background-color:'+a+';width:15px;height:15px;border: 1px solid; border-radius: 5px;margin-left:15px;"></div></div>'}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:dynamicCharactColumn",renderer:function(c,d,a,b){if(d.value!=null&&d.value.length>0){YAHOO.Bubbling.fire("columnRenamed",{columnId:"prop_"+d.value,label:c.getData("itemData")["prop_bcpg_dynamicCharactTitle"].value})}return null}});YAHOO.Bubbling.on("onDatalistColumnsReady",function(f,h){var d=h[1];if(d!=null){if(d.entityDatagrid.entity&&d.entityDatagrid.entity.compareWithEntities&&d.entityDatagrid.entity.compareWithEntities.length>0){var k=d.entityDatagrid;var g=k.widgets.dataTable.getColumn("prop_bcpg_compareWithDynColumn");if(g!=null){var b=d.entityDatagrid.widgets.dataTable.getColumn(g.getKeyIndex()-1);var a="";for(var c=0,e=k.entity.compareWithEntities.length;c<e;c++){a+="'";var i=k.entity.compareWithEntities[c];k.widgets.dataTable.insertColumn({key:"dynCompareWith-"+i.nodeRef,label:"<span title='"+i.name+"' >"+b.label+a+"</span>",editor:k.rendererHelper.getCellEditor(k,{dataType:"double",mandatory:true,fieldRef:b.getField()},k.options.saveFieldUrl),formatter:function(l,j,m,n){if(n!=null){l.innerHTML=n.displayValue}return null}},g.getKeyIndex()+c+1)}}}}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:compareWithDynColumn",renderer:function(l,d,g,k,f,a,h,e){if(d.value!=null&&d.value.indexOf&&d.value.indexOf('"comp":')>-1){var j=JSON.parse(d.value);if(j){for(var c=0;c<j.comp.length;c++){if(j.comp[c].value!=null&&j.comp[c].value!==undefined){var b=k.widgets.dataTable.getColumn("dynCompareWith-"+j.comp[c].nodeRef);k.widgets.dataTable.updateCell(l,b,{value:j.comp[c].value,displayValue:j.comp[c].displayValue,itemNodeRef:j.comp[c].itemNodeRef},false)}}}}return null}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:variantIds",renderer:function(o,c,h,l,d,k,j,f){var e=c.value,n=!e||e.length<1;if(c.value!=null&&c.value.length>0){if(f.label==""){Dom.setStyle(j,"width","16px");Dom.setStyle(j.parentNode,"width","16px")}if(f.hidden){l.widgets.dataTable.showColumn(f);Dom.removeClass(j.parentNode,"yui-dt-hidden")}}if(n){return"<span  class='variant-common'>&nbsp;</span>"}var m="variant";var a="";if(c.metadata!=null){var g=c.metadata.split(",")[0].split("#");m=g[0];if(g.length>0){var b="#"+g[1];if(m!="variant-default"&&b!=null&&b.length>0){a='style="background-color:'+b+'"'}}}if(f.label!=""){return"<span "+a+' title="'+c.displayValue+"\" class='"+m+"'>&nbsp;</span>&nbsp;"+c.displayValue}return"<span "+a+' title="'+c.displayValue+"\" class='"+m+"'>&nbsp;</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:startEffectivity","bcpg:endEffectivity"],renderer:function(o,d,g,n,e,l,j,f){if(n.options.extraDataParams!=null&&n.options.extraDataParams.indexOf("effectiveFilterOn="+(!f.hidden))>0){if(f.hidden){Dom.removeClass(j.parentNode,"yui-dt-hidden");n.widgets.dataTable.showColumn(f)}else{Dom.addClass(j.parentNode,"yui-dt-hidden");n.widgets.dataTable.hideColumn(f)}}if(g=="bcpg:startEffectivity"){var a=new Date();var h=false;var b=false;var k=d.value;var c=o.getData("itemData")["prop_bcpg_endEffectivity"];if(k!=null&&a.getTime()<Alfresco.util.fromISO8601(k).getTime()){b=true}if(!b&&c!=null&&c.value!=null&&a.getTime()>Alfresco.util.fromISO8601(c.value).getTime()){h=true}if(h||b){var m=n.widgets.dataTable.getTrEl(j);if(h){Dom.setStyle(m,"background-color","#ffebee")}else{Dom.setStyle(m,"background-color","#e8f5e9")}Dom.setStyle(m,"opacity","0.5")}}if(d.value!=null){return Alfresco.util.formatDate(d.value,"yyyy-mm-dd")}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"pack:labelingPosition",renderer:function(e,g,a,d,b,c,f,h){if(g.value!=null){Dom.setStyle(f,"width","16px");Dom.setStyle(f.parentNode,"width","16px");if(h.hidden){d.widgets.dataTable.showColumn(h);Dom.removeClass(f.parentNode,"yui-dt-hidden")}return'<span title="'+g.displayValue+"\" class='labeling-aspect'>&nbsp;</span>"}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:illValue","bcpg:illManualValue"],renderer:function(j,b,f,i){if(b.value!=null){var c="",e=b.displayValue,a="id-"+j._sId,h="bcpg_illValue",d=j.getData().permissions.userAccess.edit;if(b.displayValue==null||b.displayValue==""){e="<i>"+i.msg("label.empty")+"</i>"}c+='<div class="note rounded"><div id="'+a+h+'" > '+e+"</div>";var g=j._oData.nodeRef;c+='<div class="labeling-action-container">';if(f=="bcpg:illValue"){c+='<div id="'+h+a+'" style ="display:block; width:0; height:0; opacity: 0;">'+e+"</div>";if(d){c+='<span id="'+a+"#"+g+"#"+f+'" class="copyToIllManualValue"><a href="#" title="'+i.msg("label.copy.to.illManualValue.title")+'" class="labeling-action copy-to"></a> </span>';c+="<span>&nbsp;</span>"}c+='<span id="'+a+"#"+g+"#"+h+'" class="onCopyToClipboard"><a href="#" title="'+i.msg("label.copy.to.clipboard.title")+'" class="labeling-action clipboard"></a> </span>';c+="<span>&nbsp;&nbsp;</span>"}if(f=="bcpg:illManualValue"){c+='<span id="'+a+"#"+g+"#"+f+'#false" class="onShowTranslation"><a href="#" title="'+i.msg("label.edit.translation.title")+'" class="labeling-action edit-translation"></a> </span>';c+="<span>&nbsp;</span>"}c+='<span id="'+a+"#"+g+"#"+f+'#true" class="onShowTranslation"><a href="#" title="'+i.msg("label.show.translation.title")+'" class="labeling-action show-translation" ></a></span>';c+="</div>";c+="</div>";return c}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["ecm:cclSourceValue","ecm:cclTargetValue"],renderer:function(c,d,a,b){if(d.displayValue!=null&&d.displayValue.length>0){return d.displayValue}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"boolean_bcpg:lrIsActive",renderer:function(e,g,a,d,b,c,f,h){Dom.setStyle(f,"width","16px");Dom.setStyle(f.parentNode,"width","16px");if(h.hidden){d.widgets.dataTable.showColumn(h);Dom.removeClass(f.parentNode,"yui-dt-hidden")}if(g.value){return"<span  class='rule-enabled'>&nbsp;</span>"}return"<span  class='rule-disabled'>&nbsp;</span>"}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:dynamicCharactColumn1","bcpg:dynamicCharactColumn2","bcpg:dynamicCharactColumn3","bcpg:dynamicCharactColumn4","bcpg:dynamicCharactColumn5","bcpg:dynamicCharactColumn6","bcpg:dynamicCharactColumn7","bcpg:dynamicCharactColumn8","bcpg:dynamicCharactColumn9","bcpg:dynamicCharactColumn10"],renderer:function(r,d,l,p,e,n,m,f){if(r.getData("itemData")["isMultiLevel"]){if(p.subCache!=null&&p.subCache["idx_"+f.getKeyIndex()]!=null){for(var c=0;c<p.subCache["idx_"+f.getKeyIndex()].length;c++){var q=p.subCache["idx_"+f.getKeyIndex()][c].path;if(q==r.getData("itemData")["path"]&&p.subCache["idx_"+f.getKeyIndex()][c].displayValue){return p.subCache["idx_"+f.getKeyIndex()][c].displayValue}}}return""}if(d.value!=null){if(!r.getData("itemData")["isMultiLevel"]){if(d.value.indexOf&&d.value.indexOf('"sub":')>-1){var o=JSON.parse(d.value);if(o){if(!p.subCache){p.subCache=[]}p.subCache["idx_"+f.getKeyIndex()]=o.sub;return o.displayValue?o.displayValue:""}}}if(d.value.indexOf&&d.value.indexOf('"comp":')>-1){var o=JSON.parse(d.value);if(o){var g="",k=0,a=null,h,b=null;for(k=0;k<o.comp.length;k++){if(o.comp[k].value){if(k==0){a=beCPG.util.sigFigs(parseFloat(o.comp[k].value),4);g+="<span>"+Alfresco.util.encodeHTML(o.comp[k].displayValue)+"</span>"}else{b=beCPG.util.sigFigs(parseFloat(o.comp[k].value),4);if(b!=Number.NaN&&a!=Number.NaN){if(a==b){h="dynaCompEquals"}else{h=(a<b)?"dynaCompIncrease":"dynaCompDecrease"}}else{h="dynaCompNone"}g+='<span  class="'+h+'" >(<a title="'+o.comp[k].name+'" href="'+beCPG.util.entityURL(o.comp[k].siteId,o.comp[k].nodeRef,o.comp[k].itemType)+'">'+Alfresco.util.encodeHTML(o.comp[k].displayValue)+"</a>)</span>"}}}return g}}return d.displayValue}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:compoListQty",renderer:function(d,e,a,b){var g="";if(e.value!=null){var c="";if(Alfresco.constants.JS_LOCALE=="en_US"){var f=Math.abs(e.value*2.204622622);if(f<1){g=e.value*35.27396195;c=" oz"}else{g=e.value*2.204622622;c=" lb"}}else{var f=Math.abs(e.value);if(f<0.0001){g=e.value*1000000;c=" mg"}else{if(f<1){g=e.value*1000;c=" g"}else{if(f>1000){g=e.value/1000;c=" t"}else{g=e.value;c=" kg"}}}}g=parseFloat(g.toPrecision(5))+c}return Alfresco.util.encodeHTML(g)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:packagingListQty",renderer:function(c,d,a,b){if(d.value!=null){return d.value}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:instruction"],renderer:function(e,g,a,d,b,c,f,h){if(g.value!=null&&g.value.length>0){if(h.label==""){Dom.setStyle(f,"width","16px");Dom.setStyle(f.parentNode,"width","16px");if(h.hidden){d.widgets.dataTable.showColumn(h);Dom.removeClass(f.parentNode,"yui-dt-hidden")}return'<span title="'+g.displayValue.replace(/&nbsp;/gi," ").replace(/<(?:.|\n)*?>/gm,"").replace(/\n/gm," ").replace(/"/gm,"")+"\" class='instructions'>&nbsp;</span>"}else{return g.displayValue}}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:lclComments"],renderer:function(e,g,a,d,b,c,f,h){if(g.value!=null&&g.value.length>0){return g.displayValue}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"cm:cmobject_bcpg:lclMissingLabelClaims",renderer:function(n,b,g,l,c,k,h,f){var d=n.getData("itemData")["assoc_bcpg_lclMissingLabelClaims"];if(b.value!=null&&b.value.length>0&&d.length>0&&c==0){var j=l.msg("becpg.forms.help.lclMissingSources",d.length);var m="";for(var a in d){m+=d[a].displayValue+"\n"}var e=l.msg("becpg.forms.help.lclMissingSources.list",m);return'<span class="lcl-formulated-error" title="'+e+'">'+j+"</span>"}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"bcpg:compoListVolume",renderer:function(d,e,a,b){var f="";if(e.value!=null){var c="";if(e.value<1){f=e.value*1000;c=" mL"}else{f=e.value;c=" L"}f=parseFloat(f.toPrecision(5))+c}return Alfresco.util.encodeHTML(f)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:compoListDeclType","bcpg:packagingListPkgLevel"],renderer:function(c,d,a,b){if(d.displayValue!=null){var f="data."+a.replace(":","_").toLowerCase()+"."+d.displayValue.toLowerCase(),e=b.msg(f);if(f!=e){return Alfresco.util.encodeHTML(e)}}return Alfresco.util.encodeHTML(d.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:nutListGDAPerc"],renderer:function(s,u,g,c){var i=u.value;var n=null;if(s.getData("itemData")["dt_bcpg_nutListNut"]&&s.getData("itemData")["dt_bcpg_nutListNut"].length>0){n=s.getData("itemData")["dt_bcpg_nutListNut"][0].color}if(i!==null&&i>0&&n!=null&&n!==undefined){var a=s.getData("itemData")["dt_bcpg_nutListNut"][0].itemData;var l=s.getData("itemData")["prop_bcpg_nutListValue"].displayValue;var t=a.prop_bcpg_nutGDA.value;var k=a.prop_bcpg_nutUL.value;var m=a.prop_bcpg_nutUnit.displayValue;var b=false;var f="#F44336";var r="#cccccc";if(l!==null&&k!==null&&(l>k)){b=true;n=f}var p=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);var o=p?{r:parseInt(p[1],16),g:parseInt(p[2],16),b:parseInt(p[3],16)}:null;var h=null;if(i<100){h=b?f:r}var d="black";if(o&&(o.r*0.2126+o.g*0.7152+o.b*0.0722)<186&&i>20){d="white"}var e=null;if(t!==null&&m!==null){e=c.msg("becpg.forms.help.gda-reminder",t,m)}var q="black";if(i>80||b){q=d}var j='<div class="progress-bar" '+(h!=null?'style="background-color: '+h+';" ':"")+' title="'+i.toFixed(1)+"% "+e+(b?"\n"+c.msg("becpg.forms.help.ul-exceeded"):"")+'";">';if(e!==null){j+='<div class ="outer-progress-bar" style="float: right; color: '+q+'">'+e+"</div>"}j+='<div class ="inner-progress-bar" style="width: '+Math.min(i,100)+"%; background-color: "+n+(i<100?";":"")+';">';j+='	<div  style="color: '+d+'; white-space: nowrap;">'+i.toFixed(1)+"%</div>";j+="</div>";j+="</div>";return j}else{if(i!==null&&i>0){return Alfresco.util.encodeHTML(i.toFixed(1)+" %")}else{return""}}}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:nutListValuePerServing"],renderer:function(d,e,a,b){if(e.value!=null&&e.value>0){var f=d.getData("itemData")["dt_bcpg_nutListNut"][0].itemData;var c=f.prop_bcpg_nutUnit.displayValue;return Alfresco.util.encodeHTML(beCPG.util.sigFigs(e.value,3).toLocaleString()+" "+c)}return""}})};