(function(){var g=YAHOO.util.Dom,a=YAHOO.util.Selector,l=YAHOO.util.Event;Alfresco.component.TaskListToolbar=function c(n){Alfresco.component.TaskListToolbar.superclass.constructor.call(this,"Alfresco.component.TaskListToolbar",n,["button"]);return this};YAHOO.extend(Alfresco.component.TaskListToolbar,Alfresco.component.Base,{onReady:function e(){this.configureSearch();this.widgets.searchButton=Alfresco.util.createYUIButton(this,"search-button",this.onSearchButtonClick,{additionalClass:"alf-primary-button"});this.widgets.startWorkflowButton=Alfresco.util.createYUIButton(this,"startWorkflow-button",this.onStartWorkflowButtonClick);g.removeClass(a.query(".hidden",this.id+"-body",true),"hidden")},onStartWorkflowButtonClick:function j(n,o){document.location.href=Alfresco.util.siteURL("start-workflow?referrer=tasks&myTasksLinkBack=true")},configureSearch:function d(){this.widgets.searchBox=g.get(this.id+"-searchText");this.defaultSearchText=this.msg("header.search.default");l.addListener(this.widgets.searchBox,"focus",this.onSearchFocus,null,this);l.addListener(this.widgets.searchBox,"blur",this.onSearchBlur,null,this);this.setDefaultSearchText();var n=this;this.widgets.searchEnterListener=new YAHOO.util.KeyListener(this.widgets.searchBox,{keys:YAHOO.util.KeyListener.KEY.ENTER},{fn:n.onSearchButtonClick,scope:this,correctScope:true},"keydown").enable()},onSearchFocus:function h(){if(this.widgets.searchBox.value==this.defaultSearchText){g.removeClass(this.widgets.searchBox,"faded");this.widgets.searchBox.value=""}else{this.widgets.searchBox.select()}},onSearchBlur:function f(){var n=YAHOO.lang.trim(this.widgets.searchBox.value);if(n.length===0){YAHOO.lang.later(100,this,this.setDefaultSearchText,[])}},setDefaultSearchText:function k(){g.addClass(this.widgets.searchBox,"faded");this.widgets.searchBox.value=this.defaultSearchText},getSearchText:function i(){var n=YAHOO.lang.trim(this.widgets.searchBox.value);if(n!=this.defaultSearchText){return n}return""},_cleanSearchText:function b(){var n=this.getSearchText();if(n.indexOf("*")>0&&n.replace(/\*/g,"").length<3){this.searchTerm=null}else{this.searchTerm=n}},onSearchButtonClick:function m(){this._cleanSearchText();YAHOO.Bubbling.fire("filterSearch",{filterOwner:this.id,filterId:"search",filterData:encodeURIComponent(this.searchTerm)})}})})();