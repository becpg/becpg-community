(function(){var a=Alfresco.util.isValueSet;YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCheckOutEntity",fn:function g(m){var k=m.displayName,l=new Alfresco.util.NodeRef(m.nodeRef);Alfresco.util.PopupManager.displayMessage({displayTime:0,effect:null,text:this.msg("message.checkout-entity.inprogress",k),});this.modules.actions.genericAction({success:{callback:{fn:function n(o){this.recordData.jsNode.setNodeRef(o.json.results[0].nodeRef);window.location.href=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details?","entity-data-lists?list=View-properties&")},scope:this}},failure:{message:this.msg("message.checkout-entity.failure",k)},webscript:{method:Alfresco.util.Ajax.POST,name:"checkout/node/{nodeRef}",params:{nodeRef:l.uri}}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCheckInEntity",fn:function b(n){var l=n.displayName,m=new Alfresco.util.NodeRef(n.nodeRef),k=n.version;if(n.workingCopy&&n.workingCopy.workingCopyVersion){k=n.workingCopy.workingCopyVersion}if(!this.newEntityVersion){this.newEntityVersion=Alfresco.module.getNewEntityVersionInstance()}this.newEntityVersion.show({filename:l,nodeRef:m,version:k,merge:false,onNewEntityVersionComplete:{fn:function o(p){this.recordData.jsNode.setNodeRef(p.successful[0].nodeRef);window.location.href=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details?","entity-data-lists?list=View-properties&")},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCancelCheckOutEntity",fn:function e(n){var k=n.displayName,m=new Alfresco.util.NodeRef(n.nodeRef);this.modules.actions.genericAction({success:{callback:{fn:function l(q){var p=this.recordData.jsNode.nodeRef.nodeRef,o=q.json.results[0].nodeRef;this.recordData.jsNode.setNodeRef(o);window.location=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details?","entity-data-lists?list=View-properties&")+"#editCancelled";if(p==o){window.location.reload()}},scope:this}},failure:{message:this.msg("message.edit-cancel.failure",k)},webscript:{method:Alfresco.util.Ajax.POST,name:"cancel-checkout/node/{nodeRef}",params:{nodeRef:m.uri}}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionRefreshReport",fn:function i(m){var l=Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.please-wait"),spanClass:"wait",displayTime:0});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/entity/generate-report/node/"+m.nodeRef.replace(":/","")+"/force",successCallback:{fn:function n(o){this.recordData.jsNode.setNodeRef(m.nodeRef);window.location.href=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details?","entity-data-lists?list=View-properties&")},scope:this},failureCallback:{fn:function k(o){l.destroy();Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.failure")})},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionShowCharact",fn:function f(k){var l=a(k.location.site)?k.location.site.name:null;window.location.href=beCPG.util.entityURL(l,k.nodeRef,k.node.type)}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionShowDocs",fn:function f(k){var l=a(k.location.site)?k.location.site.name:null;window.location.href=beCPG.util.entityDocumentsURL(l,k.location.path,k.location.file,true)}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCopyDataListTo",fn:function j(n){var m=Alfresco.util.ComponentManager.find({name:"beCPG.module.EntityDataGrid"});if(m!=null&&m.length>0&&m[0].datalistMeta.nodeRef!=null){var l=Alfresco.constants.PROXY_URI+"becpg/entity/datalists/copy/node/"+m[0].datalistMeta.nodeRef.replace(":/","");this.modules.entityPicker=new Alfresco.module.SimpleDialog(this.id+"-entityPicker").setOptions({width:"33em",templateUrl:Alfresco.constants.URL_SERVICECONTEXT+"modules/entity-picker/entity-picker?title="+encodeURIComponent(this.msg("message.copy-datalist-to",m[0].datalistMeta.title))+"&entityNodeRef="+n.nodeRef,actionUrl:l,validateOnSubmit:false,firstFocus:this.id+"-entityPicker-entity-field",onSuccess:{fn:function k(o){if(o.json){var p=o.json[0];var q=a(n.location.site)?n.location.site.name:null;window.location.href=beCPG.util.entityURL(q,p,null,null,m[0].datalistMeta.name)}},scope:this}});this.modules.entityPicker.show()}else{Alfresco.util.PopupManager.displayMessage({text:this.msg("message.copy-datalist-to.notselected")})}}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionReportTplRefresh",fn:function d(k){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.please-wait-mail"),displayTime:5});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/report/reportTpl/"+k.nodeRef.replace(":/","")+"/refresh"})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionReportTplUpdatePermissions",fn:function c(m){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.update-permissions.please-wait")});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/report/reportTpl/"+m.nodeRef.replace(":/","")+"/updatePermissions",successCallback:{fn:function k(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.update-permissions.success")})},scope:this},failureCallback:{fn:function l(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.update-permissions.failure")})},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionShowAssociatedProcess",fn:function h(k){Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.URL_SERVICECONTEXT+"modules/entity-process/entity-process?nodeRef="+k.nodeRef+"&htmlid="+this.id,successCallback:{fn:function(m){var n=document.createElement("div");n.innerHTML=m.serverResponse.responseText;var l=Dom.getFirstChild(n);this.widgets.projects=Alfresco.util.createYUIPanel(l,{draggable:true,width:"40em"});this.widgets.projects.show()},scope:this},execScripts:true})}})})();