(function(){var b="fr.becpg.formulation.dashlet";beCPG.widget.DashletResizer=function(e,d){beCPG.widget.DashletResizer.superclass.constructor.call(this,"beCPG.widget.DashletResizer",e,d,["button","container"]);this.id=e;this.dashletId=d;this.preferencesService=new Alfresco.service.Preferences();return this};YAHOO.extend(beCPG.widget.DashletResizer,Alfresco.widget.DashletResizer);YAHOO.lang.augmentObject(beCPG.widget.DashletResizer.prototype,{onReady:function a(){this.dashlet=Selector.query("div.dashlet",Dom.get(this.id),true);if(!this.dashlet){return}Dom.addClass(this.dashlet,"resizable");this.dashletBody=Selector.query("div.body",this.dashlet,true);if(!this.dashletBody){return}var d=Dom.getStyle(this.dashlet,"height");if(d=="auto"){d=this.dashlet.offsetHeight-parseInt(Dom.getStyle(this.dashlet,"padding-bottom"),10)}else{d=parseInt(d,10)}this.heightDelta=d-parseInt(Dom.getStyle(this.dashletBody,"height"),10);this.widgets.resizer=new YAHOO.util.Resize(this.dashlet,{handles:["b"],minHeight:this.options.minDashletHeight,maxHeight:this.options.maxDashletHeight});this.widgets.resizer.on("resize",function(){this.onResize()},this,true);this.widgets.resizer.on("endResize",function(e){this.onEndResize(e.height)},this,true);Dom.setStyle(this.dashlet,"width","")},onEndResize:function c(f){Dom.setStyle(this.dashlet,"width","");for(var e=0;e<this._hiddenOnResize.length;e++){Dom.setStyle(this._hiddenOnResize[e],"visibility","visible")}this._hiddenOnResize={};var d=parseInt(Dom.getStyle(this.dashlet,"height"),10)-this.heightDelta;this.preferencesService.set(b+"."+this.dashletId+".height",d,{successCallback:function(){}});YAHOO.Bubbling.fire("dashletResizeEnd",{eventGroup:this.dashletId,dashletId:this.dashletId,htmlId:this.id,height:d,heightDelta:this.heightDelta})}},true)})();