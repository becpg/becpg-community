(function(){if(beCPG.component.EntityDataListToolbar){YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"export-csv",right:true,evaluate:function(b,a){return b.name!==null&&!b.name.indexOf("View-properties")==0&&!b.name.indexOf("View-reports")==0&&!b.name.indexOf("View-documents")==0},fn:function(a){var c=Alfresco.util.ComponentManager.find({name:"beCPG.module.EntityDataGrid"})[0];var b=5000;document.location.href=c._getDataUrl(b)+"&format=xlsx&metadata="+encodeURIComponent(YAHOO.lang.JSON.stringify(c._buildDataGridParams({filter:c.currentFilter})))}})}YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"entity-edit-metadata",evaluate:function(b,a){return b.name!==null&&b.name.indexOf("View-properties")==0&&a.userAccess.edit},fn:function(a){window.location.href=Alfresco.util.siteURL("edit-metadata?nodeRef="+this.entity.nodeRef+(this.options.siteId?"&siteId="+this.options.siteId:""))}});YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"entity-add-aspect",evaluate:function(b,a){return b.name!==null&&b.name.indexOf("View-properties")==0&&a.userAccess.edit},fn:function(a){this["onActionManageAspects"].call(this,this.recordData)}});YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"entity-print-metadata",evaluate:function(b,a){return b.name!==null&&b.name.indexOf("View-properties")==0},fn:function(a){var b=window.open(Alfresco.constants.URL_PAGECONTEXT+"print-details?nodeRef="+this.entity.nodeRef);setTimeout(function(){b.print()},3000)}});YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"entity-refresh-reports",evaluate:function(b,a){return b.name!==null&&b.name.indexOf("View-reports")==0},fn:function(b){var c=YAHOO.util.Selector.query("div.entity-refresh-reports"),f=this;Dom.addClass(c,"loading");var d=Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.please-wait"),spanClass:"wait",displayTime:0});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/entity/generate-report/node/"+this.entity.nodeRef.replace(":/","")+"/force",successCallback:{fn:function e(g){Dom.removeClass(c,"loading");window.location.reload()},scope:this},failureCallback:{fn:function a(g){d.destroy();Dom.removeClass(c,"loading");Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.failure")})},scope:this}})}});YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"entity-reports-parameters",evaluate:function(b,a){return b.name!==null&&b.name.indexOf("View-reports")==0&&a.userAccess.edit},fn:function(a){var b=YAHOO.lang.substitute(Alfresco.constants.URL_SERVICECONTEXT+"components/form?popup=true&formId=reports-parameters&itemKind=node&itemId={itemId}&mode=edit&submitType=json&showCancelButton=true",{itemId:this.options.entityNodeRef});var c=new Alfresco.module.SimpleDialog(this.id+"-editReportMetadata");c.setOptions({width:"33em",successMessage:this.msg("message.details.success"),failureMessage:this.msg("message.details.failure"),templateUrl:b,destroyOnHide:true,doBeforeDialogShow:{fn:function(d,e){Alfresco.util.populateHTML([e.id+"-dialogTitle",this.msg("label.entity-reports-parameters.title")])},scope:this}}).show()}})})();