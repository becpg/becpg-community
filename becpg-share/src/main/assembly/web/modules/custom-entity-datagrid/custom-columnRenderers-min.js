if(beCPG.module.EntityDataGridRenderers){YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"mltext_bcpg:lkvValue",renderer:function(c,d,a,b){if(c.getData("itemData")["prop_bcpg_depthLevel"]!=null){var e=(c.getData("itemData")["prop_bcpg_depthLevel"].value-1)*15;return'<span class="'+d.metadata+'" style="margin-left:'+e+'px;">'+Alfresco.util.encodeHTML(d.displayValue)+"</span>"}return Alfresco.util.encodeHTML(d.displayValue)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"fm:commentCount",renderer:function(e,g,a,d,b,c,f,h){if(g.value!=null&&g.value!=""&&g.value!="0"){if(d.options&&d.options.itemType=="pjt:project"){return""}if(h.hidden){h.showAfterRender=true;h.showAfterRenderSize=32}return'<div class="onActionShowComments"><a class="'+d.id+'-action-link action-link" title="'+d.msg("actions.comment")+'" href="" rel="edit"><span>'+g.displayValue+"</span></a></div>"}return""}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["bcpg:alData"],renderer:function(j,b,f,i){var h=j.getData("itemData")["prop_bcpg_alType"].value;var a=j.getData("itemData")["prop_bcpg_alUserId"];var g=j.getData("itemData")["prop_cm_created"];var c="";if(b.title||h=="Datalist"){var e="";var d=b.className!=null?b.className:"entity";e='<span class="'+d+'">'+Alfresco.util.encodeHTML(b.title)+"</span>";if(h=="State"){e=i.msg("entity.activity.state.change",e,i.msg("data.state."+b.beforeState.toLowerCase()),i.msg("data.state."+b.afterState.toLowerCase()))}else{if(h=="Datalist"){if(b.title==null||b.title.indexOf(d)>0){e=i.msg("entity.activity.datalist.simple",i.msg("data.list."+d))}else{e=i.msg("entity.activity.datalist."+b.activityEvent.toLowerCase(),e,i.msg("data.list."+d))}}else{if(h=="Entity"||h=="Formulation"||h=="Report"){e=i.msg("entity.activity."+h.toLowerCase(),e)}else{if(h=="Comment"){e=i.msg("entity.activity.comment."+b.activityEvent.toLowerCase(),e)}else{if(h=="Content"){if(b.activityEvent=="Delete"){e='<span class="doc-file"><img src="'+Alfresco.constants.URL_RESCONTEXT+"components/images/filetypes/"+Alfresco.util.getFileIcon(b.title,"cm:content",16)+'" />'+Alfresco.util.encodeHTML(b.title)+"</span>"}else{e='<span class="doc-file"><a  href="'+beCPG.util.entityURL(j.getData("siteId"),b.contentNodeRef,"document")+'"><img src="'+Alfresco.constants.URL_RESCONTEXT+"components/images/filetypes/"+Alfresco.util.getFileIcon(b.title,"cm:content",16)+'" />'+Alfresco.util.encodeHTML(b.title)+"</a></span>"}e=i.msg("entity.activity.content."+b.activityEvent.toLowerCase(),e)}else{if(h=="Merge"){e=i.msg("entity.activity.merge",e,b.branchTitle)}else{if(h=="Version"){e=i.msg("entity.activity.version",e,b.versionLabel,b.versionNodeRef)}}}}}}}c+='<div class="entity-activity-details">';c+='   <div class="icon">'+Alfresco.Share.userAvatar(a.value,32)+"</div>";c+='   <div class="details">';c+='      <span class="user-info">';c+=Alfresco.util.userProfileLink(a.value,a.displayValue,'class="theme-color-1"')+" ";c+="      </span>";c+='      <span class="date-info">';c+=Alfresco.util.relativeTime(Alfresco.util.fromISO8601(g.value))+" ("+Alfresco.util.formatDate(g.value,Alfresco.util.message(i.msg("date.format")))+") <br/>";c+="      </span>";c+='      <div class="activity-title">'+e+"</div>";if(b.content){c+='      <div class="activity-content">'+(b.content)+"</div>"}c+="   </div>";c+='   <div class="clear"></div>';c+="</div>"}return c}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"sec:groupsAssignee",renderer:function(c,d,a,b){if(d.displayValue!=null){return Alfresco.util.encodeHTML(d.displayValue)}return Alfresco.util.encodeHTML(d.metadata)}});YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:["cm:created","pjt:rlDueDate"],renderer:function(c,d,a,b){if(d.value!=null){return Alfresco.util.formatDate(d.value,"dd/mm/yyyy").toLowerCase()}return""}});var LIKE_EVENTCLASS=Alfresco.util.generateDomId(null,"like");YAHOO.Bubbling.fire("registerDataGridRenderer",{propertyName:"cm:likesRatingSchemeCount",renderer:function(n,c,h,m,d,k,j,f){if(!m.onLikes){m.likeServices=new Alfresco.service.Ratings(Alfresco.service.Ratings.LIKES);m.onLikes=function l(u){var r=this.widgets.dataTable.getRecord(u).getData(),t=new Alfresco.util.NodeRef(r.nodeRef),p=r.likes;if(!r.likes){r.likes={isLiked:false,totalLikes:0}}p.isLiked=!p.isLiked;p.totalLikes+=(p.isLiked?1:-1);var q={successCallback:{fn:function i(z,x){var A=z.json.data;if(A){var v=this._findRecordByParameter(x,"nodeRef"),y=v.getData(),w=y.likes;w.totalLikes=A.ratingsCount;this.widgets.dataTable.updateRow(v,y)}},scope:this,obj:t.toString()},failureCallback:{fn:function s(z,x){var v=this._findRecordByParameter(x,"nodeRef"),y=v.getData(),w=y.likes;w.isLiked=!w.isLiked;w.totalLikes+=(w.isLiked?1:-1);this.widgets.dataTable.updateRow(v,y);Alfresco.util.PopupManager.displayPrompt({text:this.msg("message.save.failure",x)})},scope:this,obj:t.toString()}};if(p.isLiked){this.likeServices.set(t,1,q)}else{this.likeServices.remove(t,q)}var o=this._findRecordByParameter(t,"nodeRef");this.widgets.dataTable.updateRow(o,r)};var g=function b(p,o){var i=YAHOO.Bubbling.getOwnerByTagName(o[1].anchor,"div");if(i!==null){m.onLikes.call(m,o[1].target.offsetParent,i)}return true};YAHOO.Bubbling.addDefaultAction(LIKE_EVENTCLASS,g)}var a=n.getData().likes,e="";if(a){e+='<div class="detail detail-social"><span class="item item-social">';if(a.isLiked){e+='<a class="like-action '+LIKE_EVENTCLASS+' enabled" title="'+m.msg("like.document.remove.tip")+'" tabindex="0"></a>'}else{e+='<a class="like-action '+LIKE_EVENTCLASS+'" title="'+m.msg("like.document.add.tip")+'" tabindex="0">'+m.msg("like.document.add.label")+"</a>"}e+='<span class="likes-count">'+Alfresco.util.encodeHTML(a.totalLikes)+"</span></span></div>"}return e}})};