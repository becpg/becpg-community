<?xml version="1.0" encoding="UTF-8"?>
<alfresco-config>
	<config condition="pjt:projectTpl" evaluator="node-type">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" />
					<show id="bcpg:code" />
				</field-visibility>
				<appearance>
					<field id="bcpg:code" read-only="true" />
				</appearance>
			</form>
		</forms>
	</config>
	<config condition="pjt:projectTpl" evaluator="model-type">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" />
					<show id="bcpg:code" />
				</field-visibility>
				<appearance>
					<field id="bcpg:code" read-only="true" />
				</appearance>
			</form>
		</forms>
	</config>
	<config condition="pjt:project" evaluator="node-type">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" />
					<show id="bcpg:code" for-mode="view" />
					<show id="pjt:projectHierarchy1" />
					<show id="pjt:projectProjectTpl" />
					<show id="pjt:projectStartDate" />
					<show id="pjt:projectDueDate" />
					<show id="pjt:projectCompletionDate" for-mode="view" />
					<show id="pjt:projectPriority" />
					<show id="pjt:projectState" />
					<show id="pjt:projectEntity" />
					<show id="pjt:completionPercent" />

					<!-- tags and categories -->
					<show id="cm:taggable" force="true" />
					<show id="cm:categories" force="true" />
				</field-visibility>
				<appearance>
					<field id="pjt:projectHierarchy1">
						<control template="/org/alfresco/components/form/controls/autocomplete.ftl">
							<control-param name="ds">becpg/autocomplete/listvalue/values/System/ProjectLists/bcpg:entityLists/ProjectHierarchy1
							</control-param>
							<control-param name="showTooltip">false</control-param>
						</control>
					</field>
					<field id="pjt:projectPriority">
						<control
							template="/org/alfresco/components/form/controls/workflow/priority.ftl" />
					</field>
					<!-- categories -->
					<field id="cm:taggable">
						<control>
							<control-param name="compactMode">true</control-param>
							<control-param name="params">aspect=cm:taggable
							</control-param>
							<control-param name="createNewItemUri">/api/tag/workspace/SpacesStore
							</control-param>
							<control-param name="createNewItemIcon">tag</control-param>
						</control>
					</field>
					<field id="pjt:projectState">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.taskstate.planned,InProgress|data.taskstate.inprogress,OnHold|data.taskstate.onhold,Cancelled|data.taskstate.cancelled,Completed|data.taskstate.completed
							</control-param>
						</control>
					</field>
					<field id="cm:categories">
						<control>
							<control-param name="compactMode">true</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config condition="pjt:project" evaluator="model-type">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" />
					<show id="pjt:projectHierarchy1" />
					<show id="pjt:projectProjectTpl" />
					<show id="pjt:projectStartDate" />
					<show id="pjt:projectDueDate" />
					<show id="pjt:projectPriority" />
					<show id="pjt:projectState" />
					<show id="pjt:projectEntity" />

					<!-- tags and categories -->
					<show id="cm:taggable" force="true" />
					<show id="cm:categories" force="true" />
				</field-visibility>
				<appearance>
					<field id="pjt:projectHierarchy1">
						<control template="/org/alfresco/components/form/controls/autocomplete.ftl">
							<control-param name="ds">becpg/autocomplete/listvalue/values/System/ProjectLists/bcpg:entityLists/ProjectHierarchy1
							</control-param>
							<control-param name="showTooltip">false</control-param>
						</control>
					</field>
					<field id="pjt:projectPriority">
						<control
							template="/org/alfresco/components/form/controls/workflow/priority.ftl" />
					</field>
					<field id="pjt:projectState">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.taskstate.planned,InProgress|data.taskstate.inprogress,OnHold|data.taskstate.onhold,Cancelled|data.taskstate.cancelled,Completed|data.taskstate.completed
							</control-param>
						</control>
					</field>
					<!-- categories -->
					<field id="cm:taggable">
						<control>
							<control-param name="compactMode">true</control-param>
							<control-param name="params">aspect=cm:taggable
							</control-param>
							<control-param name="createNewItemUri">/api/tag/workspace/SpacesStore
							</control-param>
							<control-param name="createNewItemIcon">tag</control-param>
						</control>
					</field>
					<field id="cm:categories">
						<control>
							<control-param name="compactMode">true</control-param>
						</control>
					</field>
				</appearance>
			</form>

			<form id="datagrid">
				<field-visibility>
					<show id="pjt:projectHierarchy1" label="" />
					<show id="pjt:projectPriority" label="" />
					<show id="pjt:completionPercent" />
					<show id="bcpg:code" />
					<show id="cm:name" />
					<show id="pjt:projectEntity" />
					<show id="dataList_pjt:taskList" />
					<show id="dataList_pjt:deliverableList" />
					<show id="cm:creator" />
					<show id="pjt:projectStartDate" />
					<show id="pjt:projectCompletionDate" />
					<show id="pjt:projectDueDate" />
					<show id="pjt:projectState" />
				</field-visibility>
				<appearance>
					<field id="dataList_pjt:deliverableList" label="Livrables" />
					<field id="dataList_pjt:taskList" label="TÃ¢ches en cours" />
					<field id="pjt:projectHierarchy1" />
					<field id="pjt:projectPriority" label="" />
					<field id="pjt:projectStartDate" label="Dates" />
				</appearance>

			</form>

			<form id="filter">
				<field-visibility>
					<show id="cm:name" />
					<show id="pjt:projectHierarchy1" />
					<show id="pjt:projectPriority"  />
					<show id="pjt:projectStartDate" />
					<show id="pjt:projectCompletionDate" />
					<show id="pjt:projectDueDate" />
					<show id="pjt:projectState" />
				</field-visibility>
				<appearance>
					<field id="pjt:projectHierarchy1">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="insertBlank">true</control-param>
						</control>
					</field>
					<field id="pjt:projectPriority" >
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">1|priority.high,2|priority.medium,3|priority.low</control-param>
							<control-param name="insertBlank">true</control-param>
						</control>
					</field>
					<field id="pjt:projectState" >
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.taskstate.planned,InProgress|data.taskstate.inprogress,OnHold|data.taskstate.onhold,Cancelled|data.taskstate.cancelled,Completed|data.taskstate.completed
							</control-param>
							<control-param name="insertBlank">true</control-param>
						</control>
					</field>
				</appearance>
			</form>
			
			
			<form id="search">
				<field-visibility>
					<show id="cm:name" />
					<show id="pjt:projectHierarchy1" />
					<show id="pjt:projectPriority" />
					<show id="pjt:projectStartDate" />
					<show id="pjt:projectCompletionDate" />
					<show id="pjt:projectDueDate" />
					<show id="pjt:projectState" />
					<show id="pjt:projectEntity" />
				</field-visibility>
				<appearance>
					<field id="pjt:projectHierarchy1" >
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="insertBlank">true</control-param>
						</control>
					</field>
					<field id="pjt:projectPriority">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">1|priority.high,2|priority.medium,3|priority.low</control-param>
							<control-param name="insertBlank">true</control-param>
						</control>
					</field>
					<field id="pjt:projectState" >
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.taskstate.planned,InProgress|data.taskstate.inprogress,OnHold|data.taskstate.onhold,Cancelled|data.taskstate.cancelled,Completed|data.taskstate.completed
							</control-param>
							<control-param name="insertBlank">true</control-param>
						</control>
					</field>
				</appearance>
			</form>

		</forms>
	</config>
	<config condition="pjt:taskLegend" evaluator="node-type">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" />
					<show id="bcpg:color" />
				</field-visibility>
				<appearance>
					<field id="bcpg:color">
						<control
							template="/org/alfresco/components/form/controls/selectcolorpicker.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config condition="pjt:taskLegend" evaluator="model-type">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" />
					<show id="bcpg:color" />
				</field-visibility>
				<appearance>
					<field id="bcpg:color">
						<control
							template="/org/alfresco/components/form/controls/selectcolorpicker.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config condition="pjt:taskList" evaluator="node-type">
		<forms>
			<form>
				<field-visibility>
					<show id="pjt:tlTaskName" />
					<show id="pjt:tlIsMilestone" />
					<show id="pjt:tlDuration" />
					<show id="pjt:tlWorkflowName" />
					<show force="true" id="pjt:tlPrevTasks" />
					<show force="true" id="pjt:tlResources" />
					<show id="pjt:tlTaskLegend" />
					<show id="pjt:tlState" />
					<show id="pjt:tlStart" read-only="true" />
					<show id="pjt:tlEnd"   read-only="true" />
					<show id="pjt:completionPercent" read-only="true" />
				</field-visibility>
				<appearance>
					<field id="pjt:tlWorkflowName">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">,activiti$projectAdhoc|Adhoc,activiti$projectNewProduct|New product</control-param>
						</control>
					</field>
					<field id="pjt:tlPrevTasks">
						<control
							template="/org/alfresco/components/form/controls/autocomplete-association.ftl">
							<control-param name="ds">becpg/autocomplete/TaskValue?className=pjt:taskList
							</control-param>
							<control-param name="showTooltip">false</control-param>
						</control>
					</field>
					<field id="pjt:tlState">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.taskstate.planned,InProgress|data.taskstate.inprogress,OnHold|data.taskstate.onhold,Cancelled|data.taskstate.cancelled,Completed|data.taskstate.completed
							</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config condition="pjt:taskList" evaluator="model-type">
		<forms>
			<form>
				<field-visibility>
					<show id="pjt:tlTaskName" />
					<show id="pjt:tlIsMilestone" />
					<show id="pjt:tlDuration" />
					<show id="pjt:tlWorkflowName" />
					<show force="true" id="pjt:tlPrevTasks" />
					<show force="true" id="pjt:tlResources" />
					<show id="pjt:tlTaskLegend" />
					<show id="pjt:tlState" />
					<show id="pjt:tlStart" read-only="true" />
					<show id="pjt:tlEnd"   read-only="true" />
					<show id="pjt:completionPercent" read-only="true" />
				</field-visibility>
				<appearance>
					<field id="pjt:tlWorkflowName">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">,activiti$projectAdhoc|Adhoc,activiti$projectNewProduct|New product</control-param>
						</control>
					</field>
					<field id="pjt:tlPrevTasks">
						<control
							template="/org/alfresco/components/form/controls/autocomplete-association.ftl">
							<control-param name="ds">becpg/autocomplete/TaskValue?className=pjt:taskList
							</control-param>
							<control-param name="showTooltip">false</control-param>
						</control>
					</field>
					<field id="pjt:tlState">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.taskstate.planned,InProgress|data.taskstate.inprogress,OnHold|data.taskstate.onhold,Cancelled|data.taskstate.cancelled,Completed|data.taskstate.completed
							</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="pjt:tlTaskName" />
					<show id="pjt:tlIsMilestone" />
					<show id="pjt:tlDuration" />
					<show force="true" id="pjt:tlPrevTasks" />
					<show force="true" id="pjt:tlResources" />
					<show id="pjt:tlTaskLegend" />
					<show id="pjt:tlState" />
					<show id="pjt:completionPercent" />
				</field-visibility>
			</form>
			<form id="sub-datagrid">
				<field-visibility>
					<show id="pjt:tlTaskName" />
					<show id="pjt:tlIsMilestone" />
					<show id="pjt:tlDuration" />
					<show force="true" id="pjt:tlPrevTasks" />
					<show force="true" id="pjt:tlResources" />
					<show id="pjt:tlTaskLegend" />
					<show id="pjt:tlState" />
					<show id="pjt:completionPercent" />
					<show id="pjt:tlStart" />
					<show id="pjt:tlEnd" />
					<show id="pjt:tlWorkflowInstance" />
				</field-visibility>
			</form>
		</forms>
	</config>
	<config condition="pjt:deliverableList" evaluator="node-type">
		<forms>
			<form>
				<field-visibility>
					<show id="pjt:dlDescription" />
					<show id="pjt:dlTask" />
					<show id="pjt:dlContent" />
					<show id="pjt:dlState" />
					<show id="pjt:completionPercent" />
				</field-visibility>
				<appearance>
					<field id="pjt:dlTask">
						<control
							template="/org/alfresco/components/form/controls/autocomplete-association.ftl">
							<control-param name="ds">becpg/autocomplete/TaskValue?className=pjt:taskList
							</control-param>
							<control-param name="showTooltip">false</control-param>
						</control>
					</field>
					<field id="pjt:dlState">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.deliverablestate.planned,InProgress|data.deliverablestate.inprogress,Completed|data.deliverablestate.completed,Closed|data.deliverablestate.closed
							</control-param>
						</control>
					</field>
					<field id="pjt:dlContent" mandatory="false" read-only="false">
		            <control template="/org/alfresco/components/form/controls/association.ftl">
		              <control-param name="startLocation">{ancestor}</control-param>
		              <control-param name="startLocationParams">type=pjt:project</control-param>
		            </control>
		          </field>
					
				</appearance>
			</form>
		</forms>
	</config>
	<config condition="pjt:deliverableList" evaluator="model-type">
		<forms>
			<form>
				<field-visibility>
					<show id="pjt:dlDescription" />
					<show id="pjt:dlTask" />
					<show id="pjt:dlContent" />
					<show id="pjt:dlState" />
					<show id="pjt:completionPercent" />
				</field-visibility>
				<appearance>
					<field id="pjt:dlTask">
						<control
							template="/org/alfresco/components/form/controls/autocomplete-association.ftl">
							<control-param name="ds">becpg/autocomplete/TaskValue?className=pjt:taskList
							</control-param>
							<control-param name="showTooltip">false</control-param>
						</control>
					</field>
					<field id="pjt:dlState">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">Planned|data.deliverablestate.planned,InProgress|data.deliverablestate.inprogress,Completed|data.deliverablestate.completed,Closed|data.deliverablestate.closed
							</control-param>
						</control>
					</field>
					<field id="pjt:dlContent" mandatory="false" read-only="false">
		            <control template="/org/alfresco/components/form/controls/association.ftl">
		              <control-param name="startLocation">{ancestor}</control-param>
		              <control-param name="startLocationParams">type=pjt:project</control-param>
		            </control>
		          </field>
				</appearance>
			</form>
			<form id="sub-datagrid">
				<field-visibility>
					<show id="pjt:dlDescription" />
					<show id="pjt:dlTask" />
					<show id="pjt:dlContent" />
					<show id="pjt:dlState" />
				</field-visibility>
			</form>
		</forms>
	</config>
	<config evaluator="aspect" condition="pjt:projectAspect">
		<forms>
			<form>
				<field-visibility>
					<show id="pjt:project" />
				</field-visibility>
				<appearance>
					<set id="project" appearance="bordered-panel" label-id="becpg.forms.set.project.label"
						template="/org/alfresco/components/form/2-column-set.ftl" />
					<field id="pjt:project" set="project" />
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>
